# Release 1.1: Skip Enhanced

**Version:** 1.1
**Status:** Planning
**Timeline:** Dec 23, 2025 - Jan 3, 2026
**Total Effort:** 30 hours
**Tagline:** "Not now, but don't forget"

---

## Overview

Release 1.1 extends the basic Skip functionality to support the same sophisticated trigger system as Snooze (1.0). This creates complete architectural parity across Snooze, Skip, and Escalate actions, laying the foundation for String-Tie (1.3) to provide natural language interfaces for all three.

**Milestone Context:** Part of the Flow Control arc (1.0-1.2). When 1.2 ships, all three flow control actions will support the unified trigger framework.

**Architecture:** Mirrors Phase 1.0 (Snooze) exactly - same JSONB trigger arrays, same event types, same evaluation patterns.

---

## Trigger Framework (Inherited from Phase 1.0)

### Unified Trigger Model

All triggers follow this structure:

```typescript
interface SkipTrigger {
  id: string;                    // Unique ID: "trigger-[type]-[timestamp]"
  type: 'date' | 'event';        // Trigger type
  config: DateTriggerConfig | EventTriggerConfig;
  createdAt: string;             // ISO 8601 timestamp
}
```

### Date Triggers

```typescript
interface DateTriggerConfig {
  date: string;      // ISO 8601: "2026-01-15T09:00:00Z"
  timezone?: string; // IANA timezone: "America/New_York" (optional, defaults to UTC)
}
```

**Example:**
```json
{
  "id": "trigger-date-1700000000",
  "type": "date",
  "config": {
    "date": "2026-01-15T09:00:00Z",
    "timezone": "America/New_York"
  },
  "createdAt": "2025-11-13T12:00:00Z"
}
```

### Event Triggers

```typescript
interface EventTriggerConfig {
  eventType: EventType;
  eventConfig?: Record<string, unknown>; // Event-specific configuration
}

type EventType =
  | 'workflow_action_completed'   // Another workflow completes
  | 'customer_login'              // Customer logs in
  | 'usage_threshold_crossed'     // Usage metric crosses threshold
  | 'manual_event';               // Manual trigger
```

**Example (Usage Threshold):**
```json
{
  "id": "trigger-event-1700000001",
  "type": "event",
  "config": {
    "eventType": "usage_threshold_crossed",
    "eventConfig": {
      "metricName": "arr",
      "threshold": 50000,
      "operator": ">="
    }
  },
  "createdAt": "2025-11-13T12:00:00Z"
}
```

### Combining Triggers

Workflows can have 1-3 triggers, combined with OR or AND logic:

```typescript
{
  skip_triggers: SkipTrigger[],          // 1-3 triggers
  skip_trigger_logic: 'OR' | 'AND'       // How to combine (default: 'OR')
}
```

---

## The Four Trigger Conventions

### 1. DATE Only
**Implementation:** 1 date trigger, logic doesn't matter

```typescript
{
  skip_triggers: [
    {
      id: "trigger-date-123",
      type: "date",
      config: { date: "2026-01-15T09:00:00Z" },
      createdAt: "2025-11-13T12:00:00Z"
    }
  ],
  skip_trigger_logic: "OR",  // Default
  skip_reason: "Waiting for budget approval on January 15th"
}
```

**Use Cases:**
- Waiting for a specific event date
- Time-based delays
- Calendar-driven workflows

---

### 2. EVENT Only
**Implementation:** 1 event trigger, logic doesn't matter

```typescript
{
  skip_triggers: [
    {
      id: "trigger-event-456",
      type: "event",
      config: {
        eventType: "usage_threshold_crossed",
        eventConfig: {
          metricName: "arr",
          threshold: 50000,
          operator: ">="
        }
      },
      createdAt: "2025-11-13T12:00:00Z"
    }
  ],
  skip_trigger_logic: "OR",
  skip_reason: "Revisit when account grows above $50k ARR"
}
```

**Use Cases:**
- Waiting for customer metrics to improve
- Waiting for business conditions to change
- Event-driven re-evaluation

---

### 3. DATE and EVENT (Both Required - AND Logic)
**Implementation:** 2 triggers (1 date + 1 event), AND logic

```typescript
{
  skip_triggers: [
    {
      id: "trigger-date-123",
      type: "date",
      config: { date: "2026-01-15T09:00:00Z" },
      createdAt: "2025-11-13T12:00:00Z"
    },
    {
      id: "trigger-event-456",
      type: "event",
      config: {
        eventType: "usage_threshold_crossed",
        eventConfig: {
          metricName: "arr",
          threshold: 50000,
          operator: ">="
        }
      },
      createdAt: "2025-11-13T12:00:00Z"
    }
  ],
  skip_trigger_logic: "AND",  // BOTH must fire
  skip_reason: "Revisit on Jan 15th AND if ARR > $50k"
}
```

**Evaluation Logic:**
```
reactivate = (current_date >= 2026-01-15) AND (arr >= 50000)
```

**Use Cases:**
- Time-gated opportunity checks
- Combining calendar events with business milestones
- Risk mitigation (both conditions required)

---

### 4. DATE or EVENT (Whichever First - OR Logic)
**Implementation:** 2 triggers (1 date + 1 event), OR logic

```typescript
{
  skip_triggers: [
    {
      id: "trigger-date-123",
      type: "date",
      config: { date: "2026-01-15T09:00:00Z" },
      createdAt: "2025-11-13T12:00:00Z"
    },
    {
      id: "trigger-event-456",
      type: "event",
      config: {
        eventType: "usage_threshold_crossed",
        eventConfig: {
          metricName: "arr",
          threshold: 50000,
          operator: ">="
        }
      },
      createdAt: "2025-11-13T12:00:00Z"
    }
  ],
  skip_trigger_logic: "OR",  // EITHER can fire
  skip_reason: "Revisit on Jan 15th OR when ARR > $50k (whichever first)"
}
```

**Evaluation Logic:**
```
reactivate = (current_date >= 2026-01-15) OR (arr >= 50000)
```

**Use Cases:**
- "Follow up next week OR when they respond"
- "Check back Friday OR if deal closes"
- Time-capped waiting with early exit conditions

---

## Features

### Feature 1: Skip - All Trigger Conventions
**Effort:** 18 hours
**Priority:** 1 (Highest)

#### Database Schema

**Extend `workflow_executions` table:**

```sql
-- Add skip trigger fields (mirrors snooze fields)
ALTER TABLE workflow_executions
ADD COLUMN skip_triggers JSONB DEFAULT '[]'::jsonb,
ADD COLUMN skip_trigger_logic TEXT DEFAULT 'OR' CHECK (skip_trigger_logic IN ('OR', 'AND')),
ADD COLUMN skip_last_evaluated_at TIMESTAMPTZ,
ADD COLUMN skip_trigger_fired_at TIMESTAMPTZ,
ADD COLUMN skip_fired_trigger_type TEXT;

-- GIN index for JSONB queries
CREATE INDEX idx_workflow_executions_skip_triggers
  ON workflow_executions USING GIN (skip_triggers);

-- Composite index for cron job
CREATE INDEX idx_workflow_executions_skip_evaluation
  ON workflow_executions(status, skip_last_evaluated_at)
  WHERE status = 'skipped';
```

**Create history table:**

```sql
CREATE TABLE workflow_skip_triggers (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  workflow_execution_id UUID REFERENCES workflow_executions(id) ON DELETE CASCADE,

  -- Trigger configuration
  trigger_type TEXT NOT NULL CHECK (trigger_type IN ('date', 'event')),
  trigger_config JSONB NOT NULL,

  -- Evaluation state
  is_fired BOOLEAN DEFAULT false,
  evaluated_at TIMESTAMPTZ,
  evaluation_count INTEGER DEFAULT 0,
  fired_at TIMESTAMPTZ,
  error_message TEXT,

  created_at TIMESTAMPTZ DEFAULT NOW(),
  updated_at TIMESTAMPTZ DEFAULT NOW()
);

-- Indexes
CREATE INDEX idx_workflow_skip_triggers_execution
  ON workflow_skip_triggers(workflow_execution_id);

CREATE INDEX idx_workflow_skip_triggers_fired
  ON workflow_skip_triggers(is_fired, trigger_type);
```

**Helper function:**

```sql
CREATE FUNCTION get_skipped_workflows_for_evaluation(
  p_evaluation_interval_minutes INTEGER DEFAULT 5
) RETURNS TABLE (
  workflow_execution_id UUID,
  skip_triggers JSONB,
  skip_last_evaluated_at TIMESTAMPTZ,
  customer_id UUID,
  user_id UUID
) LANGUAGE plpgsql AS $$
BEGIN
  RETURN QUERY
  SELECT
    we.id,
    we.skip_triggers,
    we.skip_last_evaluated_at,
    we.customer_id,
    we.assigned_csm_id
  FROM workflow_executions we
  WHERE we.status = 'skipped'
    AND we.skip_triggers IS NOT NULL
    AND jsonb_array_length(we.skip_triggers) > 0
    AND (
      we.skip_last_evaluated_at IS NULL
      OR we.skip_last_evaluated_at < NOW() - (p_evaluation_interval_minutes || ' minutes')::INTERVAL
    );
END;
$$;
```

#### API Endpoints

**POST /api/workflows/skip-with-triggers**

Skip a workflow with trigger configuration.

**Request:**
```typescript
{
  workflowId: string;
  triggers: SkipTrigger[];      // 1-3 triggers
  logic?: 'OR' | 'AND';         // Default: 'OR'
  reason?: string;              // Optional skip reason
}
```

**Response:**
```typescript
{
  success: true,
  message: "Workflow skipped with 2 trigger(s)",
  workflowId: string,
  triggerCount: number,
  willReactivate: string        // Human-readable summary
}
```

**GET /api/workflows/skipped**

Get all skipped workflows for a user.

**Query Params:**
- `userId` - Filter by user ID
- `includeTriggered` - Include workflows with fired triggers (default: false)

**Response:**
```typescript
{
  workflows: WorkflowExecutionWithSkipTriggers[],
  count: number
}
```

**POST /api/workflows/reactivate-now**

Manually reactivate a skipped workflow (CSM override).

**Request:**
```typescript
{
  workflowId: string;
  reason?: string;
}
```

**Response:**
```typescript
{
  success: true,
  message: "Workflow reactivated successfully",
  workflowId: string
}
```

#### Service Layer

**Create `SkipTriggerEvaluator` service:**

Location: `src/lib/services/SkipTriggerEvaluator.ts`

**Methods (mirror TriggerEvaluator from Phase 1.0):**

```typescript
class SkipTriggerEvaluator {
  // Main evaluation entry point
  static async evaluateTrigger(
    trigger: SkipTrigger,
    workflowExecutionId: string,
    supabase: SupabaseClient
  ): Promise<TriggerEvaluationResult>

  // Date trigger evaluation
  static async evaluateDateTrigger(
    config: DateTriggerConfig,
    supabase: SupabaseClient
  ): Promise<boolean>

  // Event trigger evaluation
  static async evaluateEventTrigger(
    config: EventTriggerConfig,
    workflowExecutionId: string,
    supabase: SupabaseClient
  ): Promise<{ triggered: boolean; reason?: string }>

  // Batch evaluation for cron
  static async evaluateAllTriggers(
    workflowExecutionId: string,
    triggers: SkipTrigger[],
    logic: 'OR' | 'AND',
    supabase: SupabaseClient
  ): Promise<{
    shouldReactivate: boolean;
    firedTrigger?: SkipTrigger;
    evaluationResults: Array<{
      trigger: SkipTrigger;
      result: TriggerEvaluationResult;
    }>;
  }>

  // Update workflow with results
  static async updateWorkflowWithEvaluationResults(
    workflowExecutionId: string,
    shouldReactivate: boolean,
    firedTrigger: SkipTrigger | undefined,
    supabase: SupabaseClient
  ): Promise<void>

  // Log evaluation to history
  static async logTriggerEvaluation(
    workflowExecutionId: string,
    trigger: SkipTrigger,
    result: TriggerEvaluationResult,
    supabase: SupabaseClient
  ): Promise<void>
}
```

**Create `WorkflowSkipService` for batch processing:**

Location: `src/lib/services/WorkflowSkipService.ts`

```typescript
class WorkflowSkipService {
  async evaluateAllSkippedWorkflows(): Promise<{
    evaluated: number;
    reactivated: number;
    errors: number;
    errorDetails?: Array<{ workflowId: string; error: string }>;
  }>
}
```

#### Cron Job

**Location:** `supabase/functions/daily-skip-evaluation/`

**Schedule:** Daily at 8:05 AM UTC (5 minutes after snooze evaluation)

**Flow:**
1. Fetch skipped workflows via `get_skipped_workflows_for_evaluation()`
2. Process in batches of 100 (parallel with `Promise.allSettled`)
3. Evaluate triggers via `SkipTriggerEvaluator.evaluateAllTriggers()`
4. If triggers fire, reactivate workflow
5. Log all evaluations to `workflow_skip_triggers` table
6. Return statistics

#### UI Components

**EnhancedSkipModal**

Location: `src/components/workflows/EnhancedSkipModal.tsx`

**Structure (clone of EnhancedSnoozeModal):**
```tsx
<EnhancedSkipModal
  workflowId={string}
  isOpen={boolean}
  onClose={() => void}
  onSkip={(triggers: SkipTrigger[], logic?: 'OR' | 'AND') => Promise<void>}
>
  <ModeSelector>
    <Radio value="date-only">Date Only</Radio>
    <Radio value="event-only">Event Only</Radio>
    <Radio value="date-and-events">Date and/or Events</Radio>
  </ModeSelector>

  {mode === 'date-only' || mode === 'date-and-events' ? (
    <>
      <QuickDateOptions />
      <DateTimePicker />
    </>
  ) : null}

  {mode === 'event-only' || mode === 'date-and-events' ? (
    <SkipTriggerBuilder
      triggers={eventTriggers}
      onChange={setEventTriggers}
      maxTriggers={mode === 'date-and-events' ? 2 : 3}
    />
  ) : null}

  {mode === 'date-and-events' && triggers.length > 1 ? (
    <TriggerLogicToggle value={logic} onChange={setLogic} />
  ) : null}

  <TextArea label="Why are you skipping?" />

  <PreviewBanner>
    Will reactivate: {getReactivationSummary(triggers, logic)}
  </PreviewBanner>

  <Button onClick={handleSkip}>Skip Workflow</Button>
</EnhancedSkipModal>
```

**SkipTriggerBuilder**

Location: `src/components/workflows/triggers/SkipTriggerBuilder.tsx`

Reuses TriggerBuilder from Phase 1.0 with Skip-specific labeling.

**SkippedWorkflowCard**

Location: `src/components/workflows/SkippedWorkflowCard.tsx`

**Features:**
- Display workflow details
- Show all skip triggers with status
- Reactivation time estimate
- Actions: View Details, Reactivate Now

#### Success Criteria

- [ ] Can skip with DATE only (1 date trigger)
- [ ] Can skip with EVENT only (1 event trigger)
- [ ] Can skip with DATE and EVENT (2 triggers, AND logic)
- [ ] Can skip with DATE or EVENT (2 triggers, OR logic)
- [ ] Skipped workflows reactivate correctly when triggers fire
- [ ] 90%+ accuracy in trigger evaluation
- [ ] Cron processes 1000+ skipped workflows in <10 seconds
- [ ] Users receive notifications when workflows reactivate

---

### Feature 2: Skip Patterns & Analytics
**Effort:** 8 hours
**Priority:** 2

#### Analytics View

```sql
CREATE VIEW skip_analytics AS
SELECT
  workflow_definition_id,
  wd.name as workflow_name,
  COUNT(*) as skip_count,
  EXTRACT(DOW FROM skipped_at) as day_of_week,
  EXTRACT(HOUR FROM skipped_at) as hour_of_day,
  jsonb_array_length(skip_triggers) as trigger_count,
  skip_trigger_logic,
  AVG(EXTRACT(EPOCH FROM (
    COALESCE(skip_trigger_fired_at, NOW()) - skipped_at
  )) / 86400) as avg_skip_duration_days
FROM workflow_executions we
JOIN workflow_definitions wd ON we.workflow_definition_id = wd.id
WHERE status = 'skipped' OR skip_triggers IS NOT NULL
GROUP BY workflow_definition_id, wd.name, day_of_week, hour_of_day,
         trigger_count, skip_trigger_logic;
```

#### Dashboard Widget

```tsx
<SkipAnalyticsWidget>
  <Stat label="Total Skipped" value={totalSkipped} />
  <Stat label="Avg Skip Duration" value={`${avgDays} days`} />

  <Chart
    title="Skip Frequency by Workflow Type"
    type="bar"
    data={skipsByWorkflowType}
  />

  <Chart
    title="Skip Patterns by Day of Week"
    type="heatmap"
    data={skipsByDayOfWeek}
  />

  <Chart
    title="Trigger Type Distribution"
    type="pie"
    data={triggerTypeBreakdown}
  />

  <Table title="Recent Skips" data={recentSkips} />
</SkipAnalyticsWidget>
```

#### Success Criteria

- [ ] Dashboard shows skip frequency by workflow type
- [ ] Can filter by date range, workflow type, trigger type
- [ ] Exportable skip history (CSV)
- [ ] Heatmap shows skip patterns by day/time
- [ ] Trigger type distribution visible

---

### Feature 3: Bulk Skip Operations
**Effort:** 4 hours
**Priority:** 3

#### API Endpoint

**POST /api/workflows/bulk-skip**

```typescript
{
  workflowIds: string[];
  triggers: SkipTrigger[];
  logic?: 'OR' | 'AND';
  reason?: string;
}
```

**Response:**
```typescript
{
  success: true,
  skipped_count: number,
  failed_count: number,
  failed_workflows?: Array<{ id: string; error: string }>
}
```

#### UI

```tsx
<WorkflowList>
  <Checkbox value="select-all" />
  {workflows.map(w => (
    <WorkflowRow key={w.id}>
      <Checkbox value={w.id} />
      {/* ... */}
    </WorkflowRow>
  ))}

  {selectedWorkflows.length > 0 ? (
    <BulkActionBar>
      <Button onClick={() => openBulkSkipModal()}>
        Skip {selectedWorkflows.length} workflows
      </Button>
    </BulkActionBar>
  ) : null}
</WorkflowList>

<BulkSkipModal workflows={selectedWorkflows}>
  {/* Same trigger builder as single skip */}
  <Note>Applies to {selectedWorkflows.length} workflows</Note>
  <Button>Skip All</Button>
</BulkSkipModal>
```

#### Undo Support

5-second undo window with toast notification:

```tsx
<Toast>
  ✓ {count} workflows skipped
  <Button onClick={undoBulkSkip}>Undo</Button>
</Toast>
```

Backend soft-delete for 24 hours (support recoverable).

#### Success Criteria

- [ ] Can select 10+ workflows and skip with one action
- [ ] Shared trigger configuration applies to all
- [ ] Undo within 5 seconds
- [ ] Shows success/failure count
- [ ] Error messages for failed workflows

---

## Dependencies

### Prerequisites from Phase 1.0
- `TriggerEvaluator` service (reuse event evaluation logic)
- Event type catalog (shared across Snooze/Skip/Escalate)
- Daily cron infrastructure
- `workflow_wake_triggers` table pattern
- Trigger UI components (TriggerBuilder, TriggerDisplay)

### Reusable from Phase 1.0
- Event type definitions (usage_threshold_crossed, workflow_action_completed, etc.)
- Date trigger evaluation logic
- Timezone handling utilities
- Notification templates
- Action logging patterns

---

## Event Types (Shared with Snooze)

All event types from Phase 1.0 are reused:

1. **workflow_action_completed** - Wait for another workflow to complete
2. **customer_login** - Wait for customer to log in
3. **usage_threshold_crossed** - Wait for metric threshold
4. **manual_event** - Wait for manual trigger

See `docs/technical/trigger-event-types.md` for full catalog.

---

## Testing Strategy

### Unit Tests
- [ ] Skip trigger validation
- [ ] SkipTriggerEvaluator - date triggers
- [ ] SkipTriggerEvaluator - event triggers
- [ ] SkipTriggerEvaluator - OR logic (first to fire wins)
- [ ] SkipTriggerEvaluator - AND logic (all must fire)
- [ ] WorkflowSkipService - batch processing

### Integration Tests
- [ ] POST /api/workflows/skip-with-triggers
- [ ] GET /api/workflows/skipped
- [ ] POST /api/workflows/reactivate-now
- [ ] Cron evaluation of skipped workflows
- [ ] Bulk skip API

### E2E Tests
- [ ] Skip with date trigger only
- [ ] Skip with event trigger only
- [ ] Skip with AND logic (2 triggers)
- [ ] Skip with OR logic (2 triggers)
- [ ] Bulk skip 10 workflows
- [ ] Undo bulk skip

---

## Migration Plan

### Phase 1: Database
```sql
-- Add skip trigger columns
ALTER TABLE workflow_executions
ADD COLUMN skip_triggers JSONB DEFAULT '[]'::jsonb,
ADD COLUMN skip_trigger_logic TEXT DEFAULT 'OR',
ADD COLUMN skip_last_evaluated_at TIMESTAMPTZ,
ADD COLUMN skip_trigger_fired_at TIMESTAMPTZ,
ADD COLUMN skip_fired_trigger_type TEXT;

-- Create history table
CREATE TABLE workflow_skip_triggers (...);

-- Create helper function
CREATE FUNCTION get_skipped_workflows_for_evaluation(...);

-- Backfill: Convert existing basic skips to trigger format
UPDATE workflow_executions
SET skip_triggers = jsonb_build_array(
  jsonb_build_object(
    'id', 'trigger-date-' || extract(epoch from skipped_at)::text,
    'type', 'date',
    'config', jsonb_build_object('date', skip_until),
    'createdAt', skipped_at
  )
)
WHERE status = 'skipped'
  AND skip_until IS NOT NULL
  AND skip_triggers = '[]'::jsonb;
```

### Phase 2: Services
- Create `SkipTriggerEvaluator.ts`
- Create `WorkflowSkipService.ts`
- Add types to `src/types/skip-triggers.ts`

### Phase 3: API
- Deploy `/skip-with-triggers` endpoint
- Deploy `/skipped` endpoint
- Deploy `/reactivate-now` endpoint
- Maintain backward compatibility with basic skip

### Phase 4: UI
- Deploy `EnhancedSkipModal`
- Deploy `SkipTriggerBuilder`
- Feature flag: `skip_enhanced` (enable for internal first)

### Phase 5: Cron
- Deploy skip evaluation cron job
- Monitor performance (<10s for 1000 workflows)

---

## Risks & Mitigation

### Risk 1: Performance with Large Volumes
**Mitigation:**
- Batch processing (100 workflows per query)
- Parallel evaluation with `Promise.allSettled()`
- GIN index on `skip_triggers` JSONB
- Monitor cron execution time

### Risk 2: User Confusion (AND vs OR)
**Mitigation:**
- Default to OR (simpler, more intuitive)
- Clear UI labels: "Any trigger fires" vs "All triggers fire"
- Preview banner showing when reactivation will happen
- Examples in help text

### Risk 3: Event Type Compatibility
**Mitigation:**
- Reuse exact same event types as Snooze
- Shared evaluation logic via SkipTriggerEvaluator
- Single event type catalog documented

---

## Success Metrics

### Adoption
- 50%+ of skips use advanced triggers (2+ triggers) within 2 weeks
- 30%+ of users use bulk skip

### Quality
- <1% false reactivation rate
- <1% missed reactivation rate
- 90%+ user satisfaction

### Performance
- Cron completes in <10 seconds for 1000 skipped workflows
- API response <200ms for skip operations

---

## Documentation Updates

- [ ] Update docs/WORKFLOWS.md with skip trigger architecture
- [ ] Add tutorial: docs/tutorials/skip-advanced-triggers.md
- [ ] Update API docs with skip endpoints
- [ ] Reference shared event types documentation

---

## Post-Release

### Week 1
- Monitor skip analytics dashboard
- Gather user feedback on AND/OR usage
- Identify common trigger patterns

### Week 2
- Refine trigger builder based on feedback
- Consider suggested triggers (ML-driven)

### Month 1
- Evaluate for Phase 1.2 (Escalate Enhanced)
- Prepare String-Tie prompts based on patterns

---

## Reference Files (Phase 1.0 to Clone)

### Database
- `supabase/migrations/20251125000000_workflow_triggers_phase1.sql`
- Pattern for skip: Replace "wake" with "skip", "snooze" with "skip"

### Services
- `src/lib/services/TriggerEvaluator.ts` → `SkipTriggerEvaluator.ts`
- `src/lib/services/WorkflowSnoozeService.ts` → `WorkflowSkipService.ts`

### API
- `src/app/api/workflows/snooze-with-triggers/route.ts` → `skip-with-triggers/route.ts`
- `src/app/api/workflows/snoozed/route.ts` → `skipped/route.ts`
- `src/app/api/workflows/wake-now/route.ts` → `reactivate-now/route.ts`

### Types
- `src/types/wake-triggers.ts` → `skip-triggers.ts`

### UI
- `src/components/workflows/EnhancedSnoozeModal.tsx` → `EnhancedSkipModal.tsx`
- `src/components/workflows/triggers/TriggerBuilder.tsx` → Reuse directly

---

**Document Version:** 2.0 (Updated to match Phase 1.0 architecture)
**Last Updated:** 2025-11-13
**Status:** Planning approved, architecture aligned
